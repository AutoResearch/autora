[runtime]
    [[root]]
        [[[environment]]]
            PYTHON=$CYLC_WORKFLOW_SHARE_DIR/env/bin/python
            HISTORYDIR="$CYLC_WORKFLOW_SHARE_DIR/history/."
            CONTROLLERPATH="$CYLC_WORKFLOW_SHARE_DIR/controller.yml"
    [[setup]]
        script = """
            cp $CYLC_WORKFLOW_RUN_DIR/controller.yml "$CONTROLLERPATH"
            cp -R $CYLC_WORKFLOW_RUN_DIR/history "$HISTORYDIR"
            conda create -p $CYLC_WORKFLOW_SHARE_DIR/env --clone /users/jholla10/anaconda/autora-cylc
        """
    [[experimentalist]]
        script = $PYTHON -m autora.controller "$CONTROLLERPATH" "$HISTORYDIR" --step-name=experimentalist --verbose --debug
        platform = oscar
    [[experiment_runner]]
        script = $PYTHON -m autora.controller "$CONTROLLERPATH" "$HISTORYDIR" --step-name=experiment_runner --verbose --debug
        platform = oscar
    [[theorist]]
        script = $PYTHON -m autora.controller "$CONTROLLERPATH" "$HISTORYDIR" --step-name=theorist --verbose --debug
        platform = oscar

[scheduling]
    cycling mode = integer
    initial cycle point = 1
    [[graph]]
        R1 = """
        setup => experimentalist
        """
        P1 = """
            experimentalist => experiment_runner => theorist
            theorist[-P1] => experimentalist
        """
